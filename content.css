/* TPI - Additional styles for calendar events */

/* Cyan/teal dominant glow with breathing pulse and subtle color flashes */
@keyframes pulseGlow {
  /* Base: Dim cyan/teal (breath out) */
  0% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.08),       /* #00F5FF - bright cyan */
      0 0 12px rgba(0, 200, 255, 0.07),     /* #00C8FF - cyan */
      0 0 16px rgba(0, 191, 255, 0.06),      /* #00BFFF - deep sky blue */
      0 0 20px rgba(0, 206, 209, 0.05),     /* #00CED1 - dark turquoise */
      0 0 24px rgba(32, 178, 170, 0.04),     /* #20B2AA - light sea green */
      0 0 28px rgba(0, 245, 255, 0.03),     /* #00F5FF - bright cyan */
      0 0 32px rgba(0, 200, 255, 0.025);     /* #00C8FF - cyan */
  }
  /* Breathing in - getting brighter */
  10% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.1),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.085),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.07),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.06),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.05),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.04),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.03);     /* #00C8FF */
  }
  /* Flash: Purple appears briefly (breathing in) */
  20% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.12),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.1),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.08),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.07),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.06),     /* #20B2AA */
      0 0 28px rgba(116, 32, 255, 0.06),     /* #7420FF - purple flash */
      0 0 32px rgba(0, 245, 255, 0.04);     /* #00F5FF */
  }
  /* Peak brightness (breath in fully) */
  30% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.12),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.1),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.08),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.07),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.06),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.05),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.04);     /* #00C8FF */
  }
  /* Starting to breathe out */
  40% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.11),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.09),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.075),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.065),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.055),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.045),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.035);     /* #00C8FF */
  }
  /* Flash: Blue appears (breathing out) */
  50% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.1),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.085),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.07),      /* #00BFFF */
      0 0 20px rgba(0, 144, 255, 0.06),     /* #0090FF - blue flash */
      0 0 24px rgba(32, 178, 170, 0.05),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.04),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.03);     /* #00C8FF */
  }
  /* Continuing to breathe out */
  60% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.09),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.075),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.065),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.055),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.045),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.035),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.03);     /* #00C8FF */
  }
  /* Breathing out more */
  70% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.085),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.07),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.06),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.05),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.04),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.03),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.025);     /* #00C8FF */
  }
  /* Flash: Purple-blue appears (breathing out) */
  80% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.08),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.065),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.055),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.045),     /* #00CED1 */
      0 0 24px rgba(58, 42, 255, 0.04),     /* #3A2AFF - purple-blue flash */
      0 0 28px rgba(0, 245, 255, 0.03),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.025);     /* #00C8FF */
  }
  /* Almost fully breathed out */
  90% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.075),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.06),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.05),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.04),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.035),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.025),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.02);     /* #00C8FF */
  }
  /* Return to dim base (fully breathed out) */
  100% {
    box-shadow: 
      0 0 8px rgba(0, 245, 255, 0.08),       /* #00F5FF */
      0 0 12px rgba(0, 200, 255, 0.07),     /* #00C8FF */
      0 0 16px rgba(0, 191, 255, 0.06),      /* #00BFFF */
      0 0 20px rgba(0, 206, 209, 0.05),     /* #00CED1 */
      0 0 24px rgba(32, 178, 170, 0.04),     /* #20B2AA */
      0 0 28px rgba(0, 245, 255, 0.03),     /* #00F5FF */
      0 0 32px rgba(0, 200, 255, 0.025);     /* #00C8FF */
  }
}

[data-tpi-color] {
  transition: background-color 0.3s ease, border-color 0.3s ease !important;
  animation: pulseGlow 6s ease-in-out infinite !important;
}

/* Persist colors using CSS custom properties - this helps maintain colors when styles are reset */
[data-tpi-color] {
  background-color: var(--tpi-event-color) !important;
  border-color: var(--tpi-event-color) !important;
  border-radius: 12px !important; /* Increased border radius for rounded corners */
  /* Multi-color glow effect will be animated via pulseGlow keyframes */
}

/* Also apply to color indicators */
[data-tpi-color] .jSrjCf {
  background-color: var(--tpi-event-color) !important;
}

[data-tpi-color] .QZVPzb .jSrjCf {
  background-color: var(--tpi-event-color) !important;
}

/* Ensure color changes are visible */
[data-tpi-processed] {
  position: relative;
  box-sizing: border-box !important; /* Ensure padding doesn't expand width */
}

/* Prevent events with icons from expanding beyond their original width */
[data-tpi-processed].tpi-colored-event,
[data-tpi-processed][data-tpi-color] {
  max-width: 100% !important;
  overflow: visible !important; /* Allow icon to be visible even if slightly outside */
}

/* Target Google Calendar events with our color */
.tpi-colored-event {
  transition: background-color 0.3s ease, border-color 0.3s ease !important;
  border-radius: 12px !important; /* Increased border radius for rounded corners */
  animation: pulseGlow 2s linear infinite !important;
  /* Multi-color glow effect will be animated via pulseGlow keyframes */
}

/* Outline styles are now applied dynamically via JavaScript based on user settings */

/* Override Google Calendar's default event colors */
.tpi-colored-event[style*="background"],
.tpi-colored-event[style*="border"] {
  transition: all 0.3s ease !important;
}

/* Target the specific Google Calendar color indicator */
.QZVPzb .jSrjCf,
.jSrjCf {
  transition: background-color 0.3s ease !important;
}

/* Cute popout animation for umbrella icon */
@keyframes iconPopout {
  0%, 99% {
    transform: scale(1);
  }
  1% {
    transform: scale(1.3);
  }
  2% {
    transform: scale(1.1);
  }
  3% {
    transform: scale(1.2);
  }
  4% {
    transform: scale(1);
  }
}

/* Separate animation for positioned icons that need to preserve translateY */
@keyframes iconPopoutWithTranslate {
  0%, 99% {
    transform: translateY(-10%) scale(1);
  }
  1% {
    transform: translateY(-10%) scale(1.3);
  }
  2% {
    transform: translateY(-10%) scale(1.1);
  }
  3% {
    transform: translateY(-10%) scale(1.2);
  }
  4% {
    transform: translateY(-10%) scale(1);
  }
}

/* Animation for far-right icons with translateY(-50%) */
@keyframes iconPopoutWithTranslateCenter {
  0%, 99% {
    transform: translateY(-50%) scale(1);
  }
  1% {
    transform: translateY(-50%) scale(1.3);
  }
  2% {
    transform: translateY(-50%) scale(1.1);
  }
  3% {
    transform: translateY(-50%) scale(1.2);
  }
  4% {
    transform: translateY(-50%) scale(1);
  }
}

/* Umbrella icon styling - ensure it's NOT white */
.tpi-umbrella-icon {
  display: inline-block !important;
  vertical-align: middle !important;
  margin-right: 4px !important;
  animation: iconPopout 10s ease-in-out infinite !important;
  transform-origin: center center !important;
  width: 11px !important;
  height: 11px !important;
  flex-shrink: 0 !important;
  color: #202124 !important;
}

/* Far-left icon positioning (for event bars) */
.tpi-far-left-icon {
  position: absolute !important;
  left: 8px !important;
  top: 50% !important;
  transform: translateY(-10%) !important;
  width: 20px !important;
  height: 20px !important;
  display: block !important;
  animation: iconPopoutWithTranslate 10s ease-in-out infinite !important;
  transform-origin: center center !important;
  z-index: 10 !important;
  pointer-events: none !important;
  margin: 0 !important;
}

.tpi-far-left-icon svg {
  width: 20px !important;
  height: 20px !important;
  display: block !important;
}

/* Far-right icon positioning (for event bars) - kept for backward compatibility */
.tpi-far-right-icon {
  position: absolute !important;
  right: 20px !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  width: 20px !important;
  height: 20px !important;
  display: block !important;
  z-index: 10 !important;
  pointer-events: none !important;
  margin: 0 !important;
  animation: iconPopoutWithTranslateCenter 10s ease-in-out infinite !important;
  transform-origin: center center !important;
}

.tpi-far-right-icon svg {
  width: 20px !important;
  height: 20px !important;
  display: block !important;
}

.tpi-umbrella-icon svg,
.tpi-umbrella-icon svg path,
.tpi-umbrella-icon svg circle,
.tpi-umbrella-icon svg line {
  color: #202124 !important;
  fill: #202124 !important;
  stroke: #202124 !important;
}

/* Make text readable in event details popup when background is colored */
/* Target event detail dialog containers */
.hMdQi,
.hMdQi .nBzcnc,
.hMdQi .toUqff {
  color: #202124 !important;
}

/* Match the popup's border-radius on the colored background element */
/* Google Calendar popups typically use 8px border-radius */
.hMdQi {
  overflow: hidden !important; /* Ensure child elements respect the border-radius */
  /* Add inset box-shadow outline - respects border-radius, doesn't affect layout */
  box-shadow: inset 0 0 0 2px #00d9ff !important; /* Bright cyan outline to match theme */
  /* Increase popup width */
  min-width: 500px !important;
  width: auto !important;
  max-width: 600px !important;
  /* Add left padding to nudge text to the right */
  padding-left: 20px !important;
}

/* Hide umbrella icons in popup - icons only show on event bars */
/* BUT show the replacement icon for .xnWuge */
.hMdQi .tpi-popup-umbrella-icon:not(.tpi-xnwuge-replacement),
.hMdQi .tpi-umbrella-icon:not(.tpi-xnwuge-replacement),
.hMdQi .tpi-far-right-icon,
.hMdQi .tpi-far-left-icon,
.hMdQi [class*="tpi-popup-umbrella"]:not(.tpi-xnwuge-replacement),
.hMdQi [class*="tpi-umbrella"]:not(.tpi-xnwuge-replacement),
.hMdQi [class*="umbrella-icon"]:not(.tpi-xnwuge-replacement) {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  width: 0 !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  position: absolute !important;
  left: -9999px !important;
}

/* Apply the same border-radius to the colored background element to match the popup perfectly */
/* JavaScript will dynamically set this to match the popup's actual border-radius */
/* Note: .xnWuge is now hidden, so this is for any other colored elements */

/* Ensure parent containers also respect border-radius */
.hMdQi .zZj8Pb.EaVNbc {
  overflow: hidden !important;
}

/* Hide .xnWuge completely */
.hMdQi .xnWuge {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

/* Show the replacement icon for .xnWuge - override all hiding rules */
.hMdQi .tpi-xnwuge-replacement,
.hMdQi .tpi-xnwuge-replacement.tpi-popup-umbrella-icon,
.hMdQi .tpi-xnwuge-replacement.tpi-umbrella-icon,
.hMdQi .zZj8Pb.EaVNbc .tpi-xnwuge-replacement {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 64px !important;
  height: 64px !important;
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Show the title icon - override all hiding rules */
.hMdQi .tpi-title-icon,
.hMdQi .tpi-title-icon.tpi-popup-umbrella-icon,
.hMdQi .tpi-title-icon.tpi-umbrella-icon,
.hMdQi .UfeRlc .tpi-title-icon,
.hMdQi #rAECCd .tpi-title-icon,
.hMdQi span[role="heading"] .tpi-title-icon {
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 20px !important;
  height: 20px !important;
  margin-right: 8px !important;
  vertical-align: middle !important;
  flex-shrink: 0 !important;
  position: relative !important;
  z-index: 1 !important;
}

/* Ensure the title icon SVG is visible */
.hMdQi .tpi-title-icon svg {
  display: inline-block !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 20px !important;
  height: 20px !important;
  vertical-align: middle !important;
}

/* CRITICAL: Never apply outlines to popup elements - only to calendar event bars */
.hMdQi,
.hMdQi *,
.hMdQi .xnWuge,
.hMdQi [data-tpi-color],
.hMdQi [data-tpi-outline-enabled] {
  box-shadow: none !important;
  border: none !important;
  outline: none !important;
  outline-offset: 0 !important;
}

/* Event title/heading text */
.hMdQi .UfeRlc,
.hMdQi .UfeRlc span[role="heading"],
.hMdQi #rAECCd,
.hMdQi [data-text] {
  color: #202124 !important;
}

/* Break event title so "â€” Robert Parkfield" appears on new line */
.hMdQi .UfeRlc,
.hMdQi .UfeRlc span[role="heading"],
.hMdQi #rAECCd {
  white-space: pre-line !important;
  word-break: break-word !important;
}

/* Date and time text */
.hMdQi .AzuXid,
.hMdQi .AzuXid span {
  color: #5f6368 !important;
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Remove padding/margin between event title and date/time - but allow spacing for our formatted version */
.hMdQi .UfeRlc + .AzuXid:not(.tpi-formatted),
.hMdQi .UfeRlc ~ .AzuXid:not(.tpi-formatted),
.hMdQi span[role="heading"] + .AzuXid:not(.tpi-formatted),
.hMdQi #rAECCd + .AzuXid:not(.tpi-formatted) {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Make date/time text smaller and move it down */
.hMdQi .AzuXid {
  font-size: 0.75em !important;
  opacity: 0.9 !important;
  margin-top: 20px !important;
  padding-top: 0 !important;
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
  line-height: 1.2 !important;
}

/* Spacing between date and time parts */
.hMdQi .AzuXid .tpi-date-part {
  display: inline-block !important;
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
  line-height: 1.2 !important;
  font-size: inherit !important;
}

.hMdQi .AzuXid .tpi-time-part {
  display: inline-block !important;
  margin-left: 5.5em !important; /* Adjust this value to control spacing */
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
  line-height: 3.2 !important;
  font-size: inherit !important;
}

/* Remove any spacing from child spans */
.hMdQi .AzuXid span {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
  line-height: 11.2 !important;
  font-size: inherit !important;
}

/* Position action icons at bottom of popup */
/* Best Practice: Parent must be position: relative for absolute children */
.hMdQi {
  position: relative !important;
}

/* Direct positioning of action icons at bottom */
/* MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/position#absolute_positioning */
/* Best Practice: Use bottom property (not top) to position from bottom edge */
.hMdQi .pYTkkf-Bz112c-RLmnJb {
  position: absolute !important;
  bottom: 16px !important;        /* Position from bottom edge */
  /* Remove conflicting properties */
  top: auto !important;            /* Remove top to avoid conflicts */
  transform: none !important;      /* Remove transform that might reposition */
  /* Ensure visibility */
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  z-index: 1000 !important;
  /* Right position will be set inline by JavaScript for proper spacing */
}

/* Hide specific button element */
.hMdQi #xDetDlg > div > div.Tnsqdc > div > div > div.pPTZAe > div:nth-child(1) > span > button > div,
.hMdQi div.pPTZAe > div:nth-child(1) > span > button > div {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  width: 0 !important;
  height: 0 !important;
  pointer-events: none !important;
}

.hMdQi {
  position: relative !important;
}

/* Also target the container that holds both title and date */
.hMdQi .UfeRlc {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* Reduce spacing in title container to allow date/time to move down */
.hMdQi .UfeRlc,
.hMdQi #rAECCd,
.hMdQi span[role="heading"] {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* Hide description text - JavaScript will handle text matching */
.hMdQi span[jscontroller="BlntMb"] {
  display: none !important;
  visibility: hidden !important;
}

/* Hide notes section */
.hMdQi #xDetDlgAtm,
.hMdQi .toUqff#xDetDlgAtm {
  display: none !important;
  visibility: hidden !important;
}

/* Hide notes text spans */
.hMdQi span.PdReTd.rEYZee {
  display: none !important;
  visibility: hidden !important;
}

/* Hide attendee divs - JavaScript will filter by text content */
/* DO NOT hide organizer sections - JavaScript handles this */

/* Hide specific icon elements: notes, drive, and event icons */
/* Target by icon classes - notes icon */
.hMdQi i.google-material-icons.giSqbe.MpJKQd,
.hMdQi i.google-material-icons.giSqbe {
  display: none !important;
  visibility: hidden !important;
}

/* Drive icon */
.hMdQi i.google-material-icons.imyxFc {
  display: none !important;
  visibility: hidden !important;
}

/* Event icon (MpJKQd without giSqbe or imyxFc) */
.hMdQi i.google-material-icons.MpJKQd:not(.giSqbe):not(.imyxFc) {
  display: none !important;
  visibility: hidden !important;
}

/* Hide reminder section ("30 minutes before") and notification bell icon - JavaScript handles this */
/* CSS can't target by text content, so JavaScript will handle hiding these elements */

/* Description text - fallback */
.hMdQi .XuJrye,
.hMdQi #xDetDlgDesc,
.hMdQi #xDetDlgDesc span {
  color: #202124 !important;
}

/* All text elements in event details */
.hMdQi * {
  color: inherit !important;
}

/* Specific text elements that should be dark */
.hMdQi span,
.hMdQi div,
.hMdQi p,
.hMdQi a {
  color: #202124 !important;
}

/* Links should be bright cyan */
.hMdQi a.UCosIb,
.hMdQi a.a1YAZe {
  color: #00d9ff !important; /* Bright cyan */
}

.hMdQi a.UCosIb:hover,
.hMdQi a.a1YAZe:hover {
  color: #00b8e6 !important; /* Slightly darker cyan on hover */
}

/* Hide "Take meeting notes" and "Start a new document to capture notes" - JavaScript handles text matching */
/* CSS fallback: hide links that might contain these texts */
.hMdQi a[href*="meetingnotes"],
.hMdQi a[href*="meeting_notes"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Make top toolbar icons white - target specific button classes */
.hMdQi .pYTkkf-Bz112c-LgbsSe svg,
.hMdQi .pYTkkf-Bz112c-LgbsSe svg path,
.hMdQi .pYTkkf-Bz112c-kBDsod-Rtc0Jf svg,
.hMdQi .pYTkkf-Bz112c-kBDsod-Rtc0Jf svg path,
.hMdQi button[aria-label="Options"] svg,
.hMdQi button[aria-label="Options"] svg path,
.hMdQi button[aria-label*="Edit"] svg,
.hMdQi button[aria-label*="Delete"] svg,
.hMdQi button[aria-label*="Close"] svg,
.hMdQi button[aria-label*="Mail"] svg,
.hMdQi .pYTkkf-Bz112c-LgbsSe .google-material-icons,
.hMdQi .pYTkkf-Bz112c-LgbsSe .NMm5M,
.hMdQi .pYTkkf-Bz112c-LgbsSe .NMm5M path {
  color: white !important;
  fill: white !important;
  stroke: white !important;
}

/* Make all other icons in popout white (except umbrella) */
.hMdQi .google-material-icons:not(.tpi-umbrella-icon),
.hMdQi i:not(.tpi-umbrella-icon),
.hMdQi svg:not(.tpi-umbrella-icon),
.hMdQi svg:not(.tpi-umbrella-icon) path,
.hMdQi svg:not(.tpi-umbrella-icon) circle,
.hMdQi svg:not(.tpi-umbrella-icon) line,
.hMdQi svg:not(.tpi-umbrella-icon) polyline,
.hMdQi svg:not(.tpi-umbrella-icon) polygon,
.hMdQi svg:not(.tpi-umbrella-icon) rect,
.hMdQi svg:not(.tpi-umbrella-icon) ellipse {
  color: white !important;
  fill: white !important;
  stroke: white !important;
}

/* CRITICAL: Ensure umbrella icon keeps its original color and is NOT affected by white rules */
.hMdQi .tpi-umbrella-icon,
.hMdQi .tpi-umbrella-icon svg,
.hMdQi .tpi-umbrella-icon svg path,
.hMdQi .tpi-umbrella-icon svg circle,
.hMdQi .tpi-umbrella-icon svg line,
.hMdQi [data-tpi-color] .tpi-umbrella-icon,
.hMdQi [data-tpi-color] .tpi-umbrella-icon svg,
.hMdQi [data-tpi-color] .tpi-umbrella-icon svg path {
  color: #202124 !important;
  fill: #202124 !important;
  stroke: #202124 !important;
}

/* Buttons and interactive elements */
.hMdQi button,
.hMdQi [role="button"] {
  color: #202124 !important;
}

/* Override any light text colors that might be set */
.hMdQi [style*="color: rgb(255"],
.hMdQi [style*="color:rgb(255"],
.hMdQi [style*="color: #fff"],
.hMdQi [style*="color:#fff"],
.hMdQi [style*="color: white"] {
  color: #202124 !important;
}

/* All icons in event popout are now white (handled by the general rule above) */
/* Specific targeting for better coverage */
.hMdQi button svg,
.hMdQi [role="button"] svg,
.hMdQi a svg,
.hMdQi [jsaction] svg {
  color: white !important;
  fill: white !important;
  stroke: white !important;
}

/* Document, menu, bell, calendar and all other icons */
.hMdQi [class*="icon"] svg,
.hMdQi [class*="Icon"] svg,
.hMdQi .google-material-icons,
.hMdQi i.google-material-icons {
  color: white !important;
  fill: white !important;
}

